var processMenu={transform:function(e,t){var i=new Array,s=$(e).parent().attr("id").replace("menu-");return $(e+" ol > li").each(function(e){$(this).attr("data",t+"-"+e)}),$(e+" > ol > li").each(function(e){s=$(this).attr("data"),i[e]={id:s,url:$("li[data='"+s+"'] input[name='url']").val(),title:$("li[data='"+s+"'] input[name='title']").val(),rel:$("li[data='"+s+"'] input[name='rel']").val(),target:$("li[data='"+s+"'] input[name='target']").val(),extra:$("li[data='"+s+"'] input[name='extra']").val(),description:$("li[data='"+s+"'] textarea").val(),submenu:processMenu.submenu('li[data="'+s+'"]')}}),i},submenu:function(e){var t=new Array;return $(e+" > ol > li").each(function(e){id=$(this).attr("data"),t[e]={url:$("li[data='"+id+"'] input[name='url']").val(),title:$("li[data='"+id+"'] input[name='title']").val(),rel:$("li[data='"+id+"'] input[name='rel']").val(),target:$("li[data='"+id+"'] input[name='target']").val(),extra:$("li[data='"+id+"'] input[name='extra']").val(),description:$("li[data='"+id+"'] textarea").val(),submenu:processMenu.submenu('li[data="'+id+'"]')}}),t},parametrize:function(e){return e[0].toSource()}};$(document).ready(function(){var e;$("a.theme-adetails").click(function(){var t=$(this).parents(".theme-options"),i=$(t).find(".theme-details");return $(t).parents(".available-theme").toggleClass("x2"),$(i).slideToggle(300,function(){e.masonry("layout")}),!1}),$("a.theme_apreview").click(function(){var e=$(this).attr("id").replace("preview-",""),t="themes.php?action=preview&amp;dir="+e,i=$("#available-"+e+" > .available_details > h6").html(),s='<iframe src="'+t+'"></iframe>';return $("#xt-previewer > .title > span:first-child").html(i),$("#xt-previewer > .website").html(s),$("body").css("overflow","hidden"),$("#xt-previewer-blocker").fadeIn("fast",function(){$("#xt-previewer").fadeIn("fast")}),!1}),$("#xt-previewer > .title > .close, #xt-previewer-blocker").click(function(){$("#xt-previewer").fadeOut("fast",function(){$("#xt-previewer-blocker").fadeOut("fast"),$("#xt-previewer > .title > span:first-child").html(""),$("#xt-previewer > .website").html(""),$("body").css("overflow","auto")})}),$(".add-menu").click(function(){$(".xt-menus-container").each(function(e){$(this).is(":visible")&&$(this).children("ol").append($("#copy").html())})}),$("#menus-select > li > a").click(function(){$(".xt-menus-container").hide(),$("#"+$(this).attr("rel")).show(),$("#menus-select > li > a").removeClass("selected"),$(this).addClass("selected")}),$(".xt-menus-container").on("click",".menu_opt_display",function(){$(this).parent().children(".options").slideToggle("fast"),$(this).hasClass("displayed")?$(this).removeClass("displayed"):$(this).addClass("displayed")}),$(".xt-menus-container").on("click",".menu_delete",function(){confirm(lang_delete)&&$(this).parent().parent().remove()}),$("body").on("keyup",'.xt-menus-container input[name="title"]',function(){var e=$(this).parents("li").find(".title");$(e).html($(this).val())}),$("a.save-menu").click(function(){var e=new Array;new Array;$("#xt-messages").hide(),$(".xt-menus-container").each(function(t){e[t]={id:$(this).attr("id").replace("menu-",""),content:processMenu.transform("#"+$(this).attr("id"),$(this).attr("id").replace("menu-",""))}}),params=json_encode(e),$.post("navigation.php",{action:"save",params:params},function(e){$("#xt-messages > span:first-child").html(e.message),$("#xt-messages").removeClass(),$("#xt-messages").addClass(e.error?"xt-msg-error":"xt-msg-success"),$("#xt-messages").slideDown("fast")},"json")}),$("#xt-messages .close").click(function(){$("#xt-messages").slideUp("fast")}),$("ul.w_sections > li > a").click(function(){var e=$(this).attr("class").replace("section-","");return $(".xt-configuration-section").hide(),$("#xt-section-"+e).show(),$("ul.w_sections > li").removeClass("xt-section-visible"),$(this).parent().addClass("xt-section-visible"),$.cookie("xtsection",e,{expires:365}),!1}),$("ul.w_sections").parent().css("padding","0"),$("ul.w_sections").css("border-radius",$("ul.w_sections").parent().css("border-radius")),$("input[type='text'], select, textarea").addClass("input-block-level"),$("#themes-items").length>0&&(e=$("#themes-items"),e.imagesLoaded(function(){e.masonry({itemSelector:".available-theme"})}))});
