function json_encode(e) {
    var t, n = this.window.JSON;
    try {
        if ("object" == typeof n && "function" == typeof n.stringify) {
            if (void 0 === (t = n.stringify(e))) throw new SyntaxError("json_encode");
            return t;
        }
        var i = function(e) {
            var t = /[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g, n = {
                "\b": "\\b",
                "\t": "\\t",
                "\n": "\\n",
                "\f": "\\f",
                "\r": "\\r",
                '"': '\\"',
                "\\": "\\\\"
            };
            return t.lastIndex = 0, t.test(e) ? '"' + e.replace(t, function(e) {
                var t = n[e];
                return "string" == typeof t ? t : "\\u" + ("0000" + e.charCodeAt(0).toString(16)).slice(-4);
            }) + '"' : '"' + e + '"';
        }, a = function(e, t) {
            var n = "", r = 0, s = "", o = "", l = 0, c = n, u = [], d = t[e];
            switch (d && "object" == typeof d && "function" == typeof d.toJSON && (d = d.toJSON(e)), 
            typeof d) {
              case "string":
                return i(d);

              case "number":
                return isFinite(d) ? String(d) : "null";

              case "boolean":
              case "null":
                return String(d);

              case "object":
                if (!d) return "null";
                if (this.PHPJS_Resource && d instanceof this.PHPJS_Resource || window.PHPJS_Resource && d instanceof window.PHPJS_Resource) throw new SyntaxError("json_encode");
                if (n += "    ", u = [], "[object Array]" === Object.prototype.toString.apply(d)) {
                    for (l = d.length, r = 0; r < l; r += 1) u[r] = a(r, d) || "null";
                    return o = 0 === u.length ? "[]" : n ? "[\n" + n + u.join(",\n" + n) + "\n" + c + "]" : "[" + u.join(",") + "]", 
                    n = c, o;
                }
                for (s in d) Object.hasOwnProperty.call(d, s) && (o = a(s, d)) && u.push(i(s) + (n ? ": " : ":") + o);
                return o = 0 === u.length ? "{}" : n ? "{\n" + n + u.join(",\n" + n) + "\n" + c + "}" : "{" + u.join(",") + "}", 
                n = c, o;

              case "undefined":
              case "function":
              default:
                throw new SyntaxError("json_encode");
            }
        };
        return a("", {
            "": e
        });
    } catch (e) {
        if (!(e instanceof SyntaxError)) throw new Error("Unexpected error type in json_encode()");
        return this.php_js = this.php_js || {}, this.php_js.last_error_json = 4, null;
    }
}

var processMenu = {
    transform: function(e, t) {
        var n = new Array(), i = $(e).attr("id").replace("menu-");
        return $(e + " ol > li").each(function(e) {
            $(this).attr("data", t + "-" + e);
        }), $(e + " > ol > li").each(function(e) {
            i = $(this).attr("data"), n[e] = {
                id: i,
                url: $("li[data='" + i + "'] input[name='url']").val(),
                title: $("li[data='" + i + "'] input[name='title']").val(),
                rel: $("li[data='" + i + "'] input[name='rel']").val(),
                target: $("li[data='" + i + "'] input[name='target']").val(),
                extra: $("li[data='" + i + "'] input[name='extra']").val(),
                description: $("li[data='" + i + "'] textarea").val(),
                submenu: processMenu.submenu('li[data="' + i + '"]')
            };
        }), n;
    },
    submenu: function(e) {
        var t = new Array();
        return $(e + " > ol > li").each(function(e) {
            id = $(this).attr("data"), t[e] = {
                url: $("li[data='" + id + "'] input[name='url']").val(),
                title: $("li[data='" + id + "'] input[name='title']").val(),
                rel: $("li[data='" + id + "'] input[name='rel']").val(),
                target: $("li[data='" + id + "'] input[name='target']").val(),
                extra: $("li[data='" + id + "'] input[name='extra']").val(),
                description: $("li[data='" + id + "'] textarea").val(),
                submenu: processMenu.submenu('li[data="' + id + '"]')
            };
        }), t;
    },
    parametrize: function(e) {
        return e[0].toSource();
    }
};

$(document).ready(function() {
    var e;
    $("a.theme-adetails").click(function() {
        var t = $(this).parents(".theme-options"), n = $(t).find(".theme-details");
        return $(t).parents(".available-theme").toggleClass("x2"), $(n).slideToggle(300, function() {
            e.masonry("layout");
        }), !1;
    }), $("a.theme_apreview").click(function() {
        var e = $(this).attr("id").replace("preview-", ""), t = "themes.php?action=preview&amp;dir=" + e, n = $("#available-" + e + " > .available_details > h6").html(), i = '<iframe src="' + t + '"></iframe>';
        return $("#xt-previewer > .title > span:first-child").html(n), $("#xt-previewer > .website").html(i), 
        $("body").css("overflow", "hidden"), $("#xt-previewer-blocker").fadeIn("fast", function() {
            $("#xt-previewer").fadeIn("fast");
        }), !1;
    }), $("#xt-previewer > .title > .close, #xt-previewer-blocker").click(function() {
        $("#xt-previewer").fadeOut("fast", function() {
            $("#xt-previewer-blocker").fadeOut("fast"), $("#xt-previewer > .title > span:first-child").html(""), 
            $("#xt-previewer > .website").html(""), $("body").css("overflow", "auto");
        });
    }), $(".add-menu").click(function() {
        $(".xt-menus-container").each(function(e) {
            $(this).is(":visible") && $(this).children("ol").append($("#copy").html());
        });
    }), $("#menus-select > li > a").click(function() {
        $(".xt-menus-container").hide(), $("#" + $(this).attr("rel")).show(), $("#menus-select > li > a").removeClass("selected"), 
        $(this).addClass("selected");
    }), $(".xt-menus-container").on("click", ".menu_opt_display", function() {
        $(this).parent().children(".options").slideToggle("fast"), $(this).hasClass("displayed") ? $(this).removeClass("displayed") : $(this).addClass("displayed");
    }), $(".xt-menus-container").on("click", ".menu_delete", function() {
        confirm(lang_delete) && $(this).parent().parent().remove();
    }), $("body").on("keyup", '.xt-menus-container input[name="title"]', function() {
        var e = $(this).parents("li").find(".title");
        $(e).html($(this).val());
    }), $("a.save-menu").click(function() {
        var e = new Array();
        new Array();
        $("#xt-messages").hide(), $(".xt-menus-container").each(function(t) {
            e[t] = {
                id: $(this).attr("id").replace("menu-", ""),
                content: processMenu.transform("#" + $(this).attr("id"), $(this).attr("id").replace("menu-", ""))
            };
        });
        var t = json_encode(e);
        $.post("navigation.php", {
            action: "save",
            params: t
        }, function(e) {
            $("#xt-messages > span:first-child").html(e.message), $("#xt-messages").removeClass(), 
            e.error ? $("#xt-messages").addClass("xt-msg-error") : $("#xt-messages").addClass("xt-msg-success"), 
            $("#xt-messages").slideDown("fast");
        }, "json");
    }), $("#xt-messages .close").click(function() {
        $("#xt-messages").slideUp("fast");
    }), $("ul.w_sections > li > a").click(function() {
        var e = $(this).attr("class").replace("section-", "");
        return $(".xt-configuration-section").hide(), $("#xt-section-" + e).show(), $("ul.w_sections > li").removeClass("xt-section-visible"), 
        $(this).parent().addClass("xt-section-visible"), $.cookie("xtsection", e, {
            expires: 365
        }), !1;
    }), $("ul.w_sections").parent().css("padding", "0"), $("ul.w_sections").css("border-radius", $("ul.w_sections").parent().css("border-radius")), 
    $("input[type='text'], select, textarea").addClass("input-block-level"), $("#themes-items").length > 0 && (e = $("#themes-items")).imagesLoaded(function() {
        e.masonry({
            itemSelector: ".available-theme"
        });
    }), $("button#restore-defaults").click(function() {
        if (0 == confirm(confirmDeletion)) return !1;
        var e = $(this);
        $(e).cuSpinner({
            icon: "svg-rmcommon-spinner-03"
        });
        var t = {
            action: "restore",
            theme: $("#xt-theme").val(),
            CUTOKEN_REQUEST: $("#cu-token").val()
        };
        $.post("settings.php", t, function(t) {
            if ($(e).cuSpinner(), 0 == cuHandler.retrieveAjax(t)) return !1;
            window.location.reload(!0);
        }, "json");
    });
});